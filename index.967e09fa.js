let e,t,r,n,l,a,d,i,o,c,s;function u(e,t){let r=document.createElement("div");e.appendChild(h(r,t));let n=document.createElement("div");e.appendChild(function(e){let t=[{name:"Boat",length:2},{name:"Submarine",length:3},{name:"Destroyer",length:3},{name:"Compressor",length:4},{name:"Defender",length:5}];for(let r=0;r<t.length;r++){let n=document.createElement("div");n.classList.add("ship"),n.draggable=!0,n.textContent=`${t[r].name} (${t[r].length})`,n.setAttribute("length",t[r].length),e.appendChild(n)}e.classList.add("choices");let r=document.createElement("label"),n=document.createElement("span");r.classList.add("label-element");let l=document.createElement("input");return l.type="checkbox",n.textContent="rotate",r.appendChild(l),r.appendChild(n),e.appendChild(r),e}(n))}function h(e,t){e.classList.add("board-start-container");for(let t=0,r=64;t<11;t++,r++){let n=document.createElement("div");0==t?n.textContent="":n.textContent=String.fromCharCode(r),n.classList.add("board-start-div-letters"),e.appendChild(n)}for(let r=0;r<t;r++){let t=document.createElement("div");t.classList.add("board-start-div"),e.appendChild(t)}for(let t=0,r=0;t<100;r++,t+=11){let n=document.createElement("div");n.classList.add("board-start-div-numbers"),n.textContent=r+1,e.insertBefore(n,Array.from(e.children)[t+11])}return e}function m(){Array.from(document.body.children).forEach(e=>{document.body.removeChild(e)})}function g(){Array.from(document.body.children).forEach(e=>{document.body.removeChild(e)});let e=document.createElement("div");e.classList.add("game-container");let t=document.createElement("div");t.classList.add("player-container");let r=document.createElement("div");r.classList.add("computer-container"),t.appendChild(p("Your Fleet")),r.appendChild(p("Computer's Fleet"));let n=document.createElement("div"),l=document.createElement("div");return t.appendChild(h(n,100)),r.appendChild(h(l,100)),e.appendChild(t),e.appendChild(r),e}function p(e){let t=document.createElement("div");return t.classList.add("player-fleet"),t.textContent=e,t}function f(e,t,r){let n=[];for(let e=0;e<10;e++)for(let r=0;r<10;r++)n.push(t.board[e][r]);for(let t=0;t<n.length;t++)if(n[t]){for(let l=0;l<r.length;l++)if(r[l]==n[t]){let n=document.createElement("div");n.classList.add(`picked-ball-${r[l].getLength()}`),e[t].classList.add(`picked-${r[l].getLength()}`),e[t].appendChild(n)}}}function b(e){let t=document.createElement("div");t.classList.add("end-game");let r=document.createElement("div");r.classList.add("shadow");let n=document.createElement("button");n.classList.add("reset-btn"),n.textContent="Reset";let l=document.createElement("div");return l.classList.add("winner-text"),l.textContent=`${e.playerUserName} has won the game!`,t.appendChild(l),t.appendChild(n),[t,r]}function y(e,t,r,n){let l;if(l=2==String(e).length?Number(String(e).split("")[r]):e,String(e).length,l+Number(t.getAttribute("length"))-1>=10&&(1!=String(e).length||0!=r))return!1;if(0==r){for(let r=0,l=0;r<Number(t.getAttribute("length"));l+=10,r++)if(0!=Array.from(n[e+l].children).length)return console.log("something is in the way"),!1}else for(let r=0;r<Number(t.getAttribute("length"));r++)if(0!=Array.from(n[e+r].children).length)return console.log("something is in the way"),!1}var C={},v={};v={createShip:(e,t,r)=>{let n=e,l=t,a=r,d=()=>n,i=()=>l,o=()=>l++,c=()=>a,s=e=>{a=e};return{getLength:d,setLength:e=>{n=e},getNumberOfHits:i,setNumberOfHits:e=>{l=e},getIsSunk:c,setIsSunk:s,hit:()=>{o(i())},isSunk:()=>(i()==d()&&s(!0),c())}}};var E={};E={createGameBoard:()=>{let e=[],t=[],r=[],n=[],l=[],a=(t,r,n,l)=>{for(let a=0;a<t.getLength();a++)if(r){if(l+a>9||0!=e[n][l+a])return!1}else if(n+a>9||0!=e[n+a][l])return!1;return!0};return{placeShip:(t,n,l,d)=>{if(!a(t,n,l,d))throw Error();for(let r=0;r<t.getLength();r++)n?e[l][d+r]=t:e[l+r][d]=t;return r.push(t),e},initalizeBoard:()=>{for(let t=0;t<10;t++)e.push([0,0,0,0,0,0,0,0,0,0])},clearBoard:()=>{e=[]},receiveAttack:([r,a])=>(l.forEach(e=>{let[t,n]=[...e];if(t==r&&n==a)throw Error()}),e[r][a])?(n.forEach(e=>{let[t,n]=[...e];if(t==r&&n==a)throw Error()}),e[r][a].hit(),n.push([r,a]),l.push([r,a]),!0):(t.push([r,a]),l.push([r,a]),!1),getMissedHits:()=>t,didAllSink:()=>{for(let e=0;e<r.length;e++)if(!r[e].isSunk())return!1;return!0},getHits:()=>n,board:e,allHits:l,getShips:()=>r}}};var L={};L={createPlayer:(e,t)=>"AI"==e?Object.assign({},{randAttack:e=>[Math.floor(Math.random()*e),Math.floor(Math.random()*e)],playerUserName:t}):Object.assign({},{attack:(e,t)=>[e,t],playerUserName:t}),setCurrentPlayer:e=>{r=e},getCurrentPlayer:()=>r,changeCurrentPlayer:(e,t)=>{r==e?r=t:r==t&&(r=e)}},i=[2,3,3,4,5],C={startGame:e=>{n=E.createGameBoard(),l=E.createGameBoard(),n.initalizeBoard(),l.initalizeBoard();for(let t=0;t<e.length;t++){let r=v.createShip(e[t].length,0,!1);n.placeShip(r,e[t].direction,e[t].row,e[t].column)}let t=0,r=[!0,!1];for(;t<i.length;)try{let e=v.createShip(i[t],0,!1);l.placeShip(e,r[Math.floor(Math.random()*r.length)],Math.floor(10*Math.random()),Math.floor(10*Math.random())),t++}catch(e){}a=L.createPlayer("","P1"),d=L.createPlayer("AI","P2"),L.setCurrentPlayer(a)},getPlayerBoard:()=>n,getEnemyBoard:()=>l,playRound:(e,t)=>{let r=String(e);1==r.length&&(r="0"+r);let[n,i]=[...r.split("").map(Number)];if(L.getCurrentPlayer()==a&&"Computer"==t)throw Error("Wrong Board");if(L.getCurrentPlayer()==d&&"Player"==t)throw L.changeCurrentPlayer(d,a),Error("Wrong Board");if("Player"==t)try{let e=l.receiveAttack([n,i]),t=l.didAllSink();return L.changeCurrentPlayer(d,a),[e,t]}catch(e){throw e}},AIMove:()=>{for(;;)try{let e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random()),r=n.receiveAttack([t,e]),l=n.didAllSink();return L.changeCurrentPlayer(d,a),[t,e,r,l]}catch{}},getPlayer1:()=>a,getPlayer2:()=>d};let S=g(),A=function(e=100){let t=document.createElement("div");t.classList.add("start-and-choice"),u(t,e);let r=document.createElement("button"),n=document.createElement("button");return n.textContent="RESET CHANGES",n.classList.add("reset-btn-options"),r.classList.add("start-game"),r.textContent="START BATTLE",t.appendChild(n),t.appendChild(r),t}(),N=A.querySelector(".start-game"),k=A.querySelector(".reset-btn-options"),P=((o=document.createElement("div")).classList.add("start-container"),(c=document.createElement("h1")).classList.add("welcome-text"),c.textContent="Welcome to Battleship!",(s=document.createElement("button")).classList.add("start-button"),s.textContent="Start",o.appendChild(c),o.appendChild(s),o);document.body.appendChild(P);let B=P.querySelector(".start-button"),q=[];function x(){let e,t=document.querySelector(".choices"),r=document.querySelectorAll(".choices .ship"),n=document.querySelectorAll(".board-start-container .board-start-div");r.forEach(t=>{t.addEventListener("drag",t=>{e=t.target})});for(let r=0;r<n.length;r++)n[r].addEventListener("dragover",t=>{if(t.preventDefault(),document.querySelector("input[type=checkbox]").checked){if(!1!=y(r,e,0,n))for(let t=0,l=0;t<Number(e.getAttribute("length"));l+=10,t++)n[r+l]&&n[r+l].classList.add("green");else for(let t=0,l=0;t<Number(e.getAttribute("length"));l+=10,t++)n[r+l]&&n[r+l].classList.add("red")}else if(!1!=y(r,e,1,n))for(let t=0;t<Number(e.getAttribute("length"));t++)n[r+t].classList.add("green");else for(let t=0;t<Number(e.getAttribute("length"));t++){let e;e=2==String(r).length?Number(String(r).split("")[1]):r,n[r+t]&&e+t<10&&n[r+t].classList.add("red")}}),n[r].addEventListener("dragleave",t=>{if(t.preventDefault(),document.querySelector("input[type=checkbox]").checked){if(!1!=y(r,e,0,n))for(let t=0,l=0;t<Number(e.getAttribute("length"));l+=10,t++)n[r+l]&&n[r+l].classList.remove("green");else for(let t=0,l=0;t<Number(e.getAttribute("length"));l+=10,t++)n[r+l]&&n[r+l].classList.remove("red")}else if(!1!=y(r,e,1,n))for(let t=0;t<Number(e.getAttribute("length"));t++)n[r+t].classList.remove("green");else for(let t=0;t<Number(e.getAttribute("length"));t++)n[r+t]&&n[r+t].classList.remove("red")}),n[r].addEventListener("drop",l=>{for(let e=0;e<n.length;e++)n[e].classList.remove("red"),n[e].classList.remove("green");if(l.preventDefault(),document.querySelector("input[type=checkbox]").checked){if(!1!=y(r,e,0,n)){let l;2==String(r).length?(l=String(r).split("").map(Number),q.push({row:l[0],column:l[1],direction:!1,length:Number(e.getAttribute("length"))})):(l=r,q.push({row:0,column:l,direction:!1,length:Number(e.getAttribute("length"))}));for(let t=0,l=0;t<Number(e.getAttribute("length"));l+=10,t++){let e=document.createElement("div");e.classList.add("location"),n[r+l].appendChild(e)}t.removeChild(e),5==q.length&&(N.disabled=!1)}}else if(!1!=y(r,e,1,n)){let l;2==String(r).length?(l=String(r).split("").map(Number),q.push({row:l[0],column:l[1],direction:!0,length:Number(e.getAttribute("length"))})):(l=r,q.push({row:0,column:l,direction:!0,length:Number(e.getAttribute("length"))}));for(let t=0;t<Number(e.getAttribute("length"));t++){let e=document.createElement("div");e.classList.add("location"),n[r+t].appendChild(e)}t.removeChild(e),5==q.length&&(N.disabled=!1)}})}B.addEventListener("click",()=>{m(),q=[],N.disabled=!0,document.body.appendChild(A),x()});let w=!1;N.addEventListener("click",()=>{document.querySelectorAll(".board-start-container .board-start-div"),m(),C.startGame(q),document.body.appendChild(S),function(){let r;e=S.querySelectorAll(".player-container .board-start-container .board-start-div"),t=S.querySelectorAll(".computer-container .board-start-container .board-start-div"),f(e,C.getPlayerBoard(),C.getPlayerBoard().getShips()),f(t,C.getEnemyBoard(),C.getEnemyBoard().getShips());let n,l,a,d=!1;for(let i=0;i<t.length;i++)t[i].addEventListener("click",()=>{if(!1==w)try{if([r,w]=C.playRound(i,"Player"),r)Array.from(t[i].children)[0].classList.add("visible");else{let e=document.createElement("div");e.classList.add("missed"),t[i].appendChild(e)}if(w){S=g(),w=!1,m();let[e,t]=b(C.getPlayer1());document.body.appendChild(e),document.body.appendChild(t),document.querySelector(".reset-btn").addEventListener("click",()=>{m(),document.body.appendChild(A)})}else if(!1==d){if([n,l,a,d]=[...C.AIMove()],a){if(0==n)Array.from(e[l].children)[0].classList.add("hit");else{let t=`${n}${l}`,r=Number(t);Array.from(e[r].children)[0].classList.add("hit")}}else if(0==n){let t=document.createElement("div");t.classList.add("missed"),e[l].appendChild(t)}else{let t=`${n}${l}`,r=Number(t),a=document.createElement("div");a.classList.add("missed"),e[r].appendChild(a)}if(d){S=g(),d=!1,m();let[e,t]=b(C.getPlayer2());document.body.appendChild(e),document.body.appendChild(t),document.querySelector(".reset-btn").addEventListener("click",()=>{m(),document.body.appendChild(A)})}}}catch(e){}})}(S)}),k.addEventListener("click",()=>{let e=A.querySelector(".board-start-container"),t=A.querySelector(".choices");A.removeChild(e),A.removeChild(t),u(A,100),e=A.querySelector(".board-start-container"),t=A.querySelector(".choices"),A.removeChild(e),A.removeChild(t),A.insertBefore(e,k),A.insertBefore(t,k),x(),q=[],N.disabled=!0});
//# sourceMappingURL=index.967e09fa.js.map
