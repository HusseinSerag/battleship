let e,t,r,a,l,n,d,o,i,c,s,h,m;function u(e,t){e.classList.add("board-start-container");for(let t=0,r=64;t<11;t++,r++){let a=document.createElement("div");0==t?a.textContent="":a.textContent=String.fromCharCode(r),a.classList.add("board-start-div-letters"),e.appendChild(a)}for(let r=0;r<t;r++){let t=document.createElement("div");t.classList.add("board-start-div"),e.appendChild(t)}for(let t=0,r=0;t<100;r++,t+=11){let a=document.createElement("div");a.classList.add("board-start-div-numbers"),a.textContent=r+1,e.insertBefore(a,Array.from(e.children)[t+11])}return e}function p(){Array.from(document.body.children).forEach(e=>{document.body.removeChild(e)})}function f(){Array.from(document.body.children).forEach(e=>{document.body.removeChild(e)});let e=document.createElement("div");e.classList.add("game-container");let t=document.createElement("div");t.classList.add("player-container");let r=document.createElement("div");r.classList.add("computer-container"),t.appendChild(g("Your Fleet")),r.appendChild(g("Computer's Fleet"));let a=document.createElement("div"),l=document.createElement("div");return t.appendChild(u(a,100)),r.appendChild(u(l,100)),e.appendChild(t),e.appendChild(r),e}function g(e){let t=document.createElement("div");return t.classList.add("player-fleet"),t.textContent=e,t}function y(e,t,r){let a=[];for(let e=0;e<10;e++)for(let r=0;r<10;r++)a.push(t.board[e][r]);for(let t=0;t<a.length;t++)if(a[t]){for(let l=0;l<r.length;l++)if(r[l]==a[t]){let a=document.createElement("div");a.classList.add(`picked-ball-${r[l].getLength()}`),e[t].classList.add(`picked-${r[l].getLength()}`),e[t].appendChild(a)}}}function C(e){let t=document.createElement("div");t.classList.add("end-game");let r=document.createElement("div");r.classList.add("shadow");let a=document.createElement("button");a.classList.add("reset-btn");let l=document.createElement("div");return l.classList.add("winner-text"),l.textContent=`${e} has won the game!`,t.appendChild(l),t.appendChild(a),[t,r]}var E={},b={};b={createShip:(e,t,r)=>{let a=e,l=t,n=r,d=()=>a,o=()=>l,i=()=>l++,c=()=>n,s=e=>{n=e};return{getLength:d,setLength:e=>{a=e},getNumberOfHits:o,setNumberOfHits:e=>{l=e},getIsSunk:c,setIsSunk:s,hit:()=>{i(o())},isSunk:()=>(o()==d()&&s(!0),c())}}};var v={};v={createGameBoard:()=>{let e=[],t=[],r=[],a=[],l=[],n=(t,r,a,l)=>{for(let n=0;n<t.getLength();n++)if(r){if(l+n>9||0!=e[a][l+n])return!1}else if(a+n>9||0!=e[a+n][l])return!1;return!0};return{placeShip:(t,a,l,d)=>{if(!n(t,a,l,d))throw Error();for(let r=0;r<t.getLength();r++)a?e[l][d+r]=t:e[l+r][d]=t;return r.push(t),e},initalizeBoard:()=>{for(let t=0;t<10;t++)e.push([0,0,0,0,0,0,0,0,0,0])},clearBoard:()=>{e=[]},receiveAttack:([r,n])=>(l.forEach(e=>{let[t,a]=[...e];if(t==r&&a==n)throw Error()}),e[r][n])?(a.forEach(e=>{let[t,a]=[...e];if(t==r&&a==n)throw Error()}),e[r][n].hit(),a.push([r,n]),l.push([r,n]),!0):(t.push([r,n]),l.push([r,n]),!1),getMissedHits:()=>t,didAllSink:()=>{for(let e=0;e<r.length;e++)if(!r[e].isSunk())return!1;return!0},getHits:()=>a,board:e,allHits:l,getShips:()=>r}}};var L={};L={createPlayer:(e,t)=>"AI"==e?Object.assign({},{randAttack:e=>[Math.floor(Math.random()*e),Math.floor(Math.random()*e)],playerUserName:t}):Object.assign({},{attack:(e,t)=>[e,t],playerUserName:t}),setCurrentPlayer:e=>{r=e},getCurrentPlayer:()=>r,changeCurrentPlayer:(e,t)=>{r==e?r=t:r==t&&(r=e)}},c=[2,3,3,4,5],E={startGame:()=>{a=v.createGameBoard(),l=v.createGameBoard(),a.initalizeBoard(),l.initalizeBoard(),o=b.createShip(3,0,!1),b.createShip(3,0,!1),i=b.createShip(6,0,!1),a.placeShip(o,!0,0,0),a.placeShip(i,!1,2,2);let e=0,t=[!0,!1];for(;e<c.length;)try{let r=b.createShip(c[e],0,!1);l.placeShip(r,t[Math.floor(Math.random()*t.length)],Math.floor(10*Math.random()),Math.floor(10*Math.random())),e++}catch(e){}n=L.createPlayer("","P1"),d=L.createPlayer("AI","P2"),L.setCurrentPlayer(n)},getPlayerBoard:()=>a,getEnemyBoard:()=>l,playRound:(e,t)=>{let r=String(e);1==r.length&&(r="0"+r);let[a,o]=[...r.split("").map(Number)];if(console.log(`${L.getCurrentPlayer().playerUserName}'s turn`),L.getCurrentPlayer()==n&&"Computer"==t)throw Error("Wrong Board");if(L.getCurrentPlayer()==d&&"Player"==t)throw L.changeCurrentPlayer(d,n),Error("Wrong Board");if("Player"==t)try{let e=l.receiveAttack([a,o]),t=l.didAllSink();return L.changeCurrentPlayer(d,n),[e,t]}catch(e){throw console.log(e),e}},AIMove:()=>{for(;;)try{let e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random()),r=a.receiveAttack([t,e]),l=a.didAllSink();return console.log(a.board),console.log(a.getMissedHits()),console.log(a.getHits()),L.changeCurrentPlayer(d,n),[t,e,r,l]}catch{console.log("didnt break")}},player1:n,player2:d};let S=f(),A=function(e=100){let t=document.createElement("div");t.classList.add("start-and-choice");let r=document.createElement("div");t.appendChild(u(r,e));let a=document.createElement("div");t.appendChild(a);let l=document.createElement("button");return l.classList.add("start-game"),l.textContent="START BATTLE",t.appendChild(l),t}(),P=A.querySelector(".start-game"),k=((s=document.createElement("div")).classList.add("start-container"),(h=document.createElement("h1")).classList.add("welcome-text"),h.textContent="Welcome to Battleship!",(m=document.createElement("button")).classList.add("start-button"),m.textContent="Start",s.appendChild(h),s.appendChild(m),s);document.body.appendChild(k),k.querySelector(".start-button").addEventListener("click",()=>{p(),document.body.appendChild(A)});let B=!1;P.addEventListener("click",()=>{p(),E.startGame(),document.body.appendChild(S),function(){let r;console.log("here"),e=S.querySelectorAll(".player-container .board-start-container .board-start-div"),t=S.querySelectorAll(".computer-container .board-start-container .board-start-div"),y(e,E.getPlayerBoard(),E.getPlayerBoard().getShips()),y(t,E.getEnemyBoard(),E.getEnemyBoard().getShips());let a,l,n,d=!1;for(let o=0;o<t.length;o++)t[o].addEventListener("click",()=>{if(!1==B)try{if([r,B]=E.playRound(o,"Player"),r)Array.from(t[o].children)[0].classList.add("visible");else{let e=document.createElement("div");e.classList.add("missed"),t[o].appendChild(e)}if(B){S=f(),B=!1,p(),console.log(1);let[e,t]=C(E.player1.playerUserName);document.body.appendChild(e),document.body.appendChild(t)}else if(!1==d){if([a,l,n,d]=[...E.AIMove()],console.log(a,l,n,d),n){if(0==a)Array.from(e[l].children)[0].classList.add("hit");else{let t=`${a}${l}`,r=Number(t);console.log(r),Array.from(e[r].children)[0].classList.add("hit")}}else if(0==a){let t=document.createElement("div");t.classList.add("missed"),e[l].appendChild(t)}else{let t=`${a}${l}`,r=Number(t);console.log(r);let n=document.createElement("div");n.classList.add("missed"),e[r].appendChild(n)}if(d){S=f(),d=!1,p();let[e,t]=C(E.player2.playerUserName);document.body.appendChild(e),document.body.appendChild(t)}}}catch(e){}})}(S)});
//# sourceMappingURL=index.e1245a21.js.map
